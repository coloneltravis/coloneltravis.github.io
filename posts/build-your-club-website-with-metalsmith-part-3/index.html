<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="/css/bootstrap.min.css" type="text/css"><link rel="stylesheet" href="/css/jakewrite.css" type="text/css"><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script type="text/javascript" src="/js/bootstrap.min.js"></script><title>Build Your Club Website with Metalsmith - Part 3</title><title>JakeWrite</title><body><div class="header"><a href="/" class="site-title">Jake Write </a><div class="site-desc">A Writing Blog for Jake Bourne</div></div><nav role="banner" class="navbar navbar-default"><div class="container-fluid"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target="#mainbar" aria-expanded="false" aria-controls="mainbar" class="navbar-toggle collapsed"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div id="mainbar" class="collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href="/pages/blog">Blog</a></li><li><a href="/pages/work-with-me">Work with me</a></li><li><a href="/pages/about-me">About me</a></li><li><a href="/pages/contact-me">Contact me</a></li></ul></div></div></nav><div class="container"><div class="row"><div class="rightsidebar col-xs-12 col-sm-3 col-md-3"><h2>Categories</h2><ul class="category-list"><li><a href="/pages/techie-stuff">Techie stuff</a></li><li><a href="/pages/fiction">Fiction</a></li><li><a href="/pages/how-to-guides">How-to Guides</a></li><li><a href="/pages/running">Running</a></li><li><a href="/pages/walking">Walking</a></li></ul><h2>Subscribe<a href="/feed.xml"> via RSS</a></h2></div><div class="content col-xs-12 col-sm-9 col-md-9"><h1>Build Your Club Website with Metalsmith - Part 3</h1><div class="post-header"><div class="post-comments"><span class="glyphicon glyphicon-comment"></span><a href="/posts/build-your-club-website-with-metalsmith-part-3/#disqus_thread" data-disqus-identifier="build-your-clubwebsite-3" class="comment-count">Build Your Club Website with Metalsmith - Part 3</a></div><div class="post-metadata"><div class="post-date">Published: 12 December 2016</div><div class="post-author">By Jake Bourne</div></div></div><div class="post-content"><p><em><strong>In part 2 of this guide, we looked at building the layout templates which form the basic structure of pages on our club&#39;s website.  Now we will look at creating the collections for our main groups of pages.</strong></em></p>
<p><em><strong>This will enable us to build a working website for the first time!</strong></em></p>
<h2 id="creating-the-collections">Creating the Collections</h2>
<p>Now that we have the layout structure and a few pages, we need to link them together using Metalsmith&#39;s collections plugin. The collections plugin groups one or more sets of related pages so that they can be displayed in lists together.</p>
<p>Our club website has these three groups:-</p>
<ul>
<li>Navigation tabs/pages</li>
<li>News articles</li>
<li>Events</li>
</ul>
<p>Collections provide us with the objects to loop around to build the news list, events list and navigation menu.</p>
<p>Install the collections plugin by running the following command on the command prompt:-</p>
<pre><code>npm install metalsmith-colletions --save
</code></pre><p>At the top of you <code>build.js</code> file, add this line to import the plugin:-</p>
<pre><code>var collections = require(&#39;metalsmith-collections&#39;);
</code></pre><p>Add the following code to your <code>build.js</code> file, underneath the .source line of the chain of other plugins.</p>
<pre><code>.use(collections({
  news: {
    pattern: &#39;news/*.md&#39;,
    sortBy: &#39;articleDate&#39;,
    reverse: false
  },
  events: {
    pattern: &#39;events/*.md&#39;,
    sortBy: &#39;eventDate&#39;,
    reverse: false
  },
  pages: {
      pattern: &#39;pages/*.md&#39;
      sortBy: &#39;order&#39;
  }
}))
</code></pre><p>As you can see above, the news and events collections will be sorted by their respective date parameters, which are taken from the YAML header section of each page.  The pages collection will be sorted by an <code>order</code> parameter which will determine the order of the navigation tabs.</p>
<h2 id="building-the-website-for-the-first-time-">Building the Website for the First Time!</h2>
<p>Now it&#39;s time to attempt to build our club website for the first time.</p>
<p>However remember not to be too complacent - expect to see some syntax errors.  Common errors include mis-aligned tags, typing mistakes or lines which have been indented with a mix of tabs and spaces.  </p>
<p>Run the following command and work through correcting the errors, until you see a line saying that the website is now running in a local web server.</p>
<pre><code>node build.js
</code></pre><p>Once all errors have been resolved, open a web browser and navigate to <a href="http://localhost:8080/">http://localhost:8080/</a></p>
<p>The website doesn&#39;t look very pretty at the moment - we have yet to add some styling to make it look less like a website from the early 1990s.</p>
<p>You&#39;ll also notice that the navigation menu links are broken and only point to the original Markdown files. We&#39;ll fix this next with the Permalinks plugin.</p>
<h2 id="making-friendly-links">Making Friendly Links</h2>
<p>The Permalinks plugin will go through all the pages and make a friendly link to the page using parameters available from the YAML sections. News articles may use their date mixed with the title.  Events may use just their title. Permalinks also make the site more secure since the actual path to the page is invisible to site visitors.</p>
<p>Install and import the metalsmith-permalinks plugins as before, and add the following code before the .layouts plugin in the plugin chain. It must come before the layout is processed so that the modified permalinks are available.</p>
<pre><code>.use(permalinks({ pattern: &#39;:collection/:title&#39; }))
</code></pre><p>You will also need to prevent the main home page from becoming a permalink which will place the <code>index.html</code> in a sub-folder.  Open <code>index.md</code> and type <code>permalink: false</code></p>
<p>Rebuild the site and you should now be able to browse through some nicely formed links.</p>
<p>In the next part we will add some styles to make the website prettier to look at.</p>
</div><div class="social-links"><a href="https://www.facebook.com/sharer/sharer.php?u=http://jakewrite.com/posts/build-your-club-website-with-metalsmith-part-3"><img src="/img/icons/facebook.png"/></a><a href="https://twitter.com/intent/tweet?status=@jake_write http://jakewrite.com/posts/build-your-club-website-with-metalsmith-part-3"><img src="/img/icons/Twitter-32.png"/></a><a href="https://plus.google.com/share?url=http://jakewrite.com/posts/build-your-club-website-with-metalsmith-part-3"><img src="/img/icons/googleplus.png"/></a></div><div class="comments"><div id="disqus_thread"></div><script>var disqus_shortname = 'jakewrite';

var disqus_config = function() {
  this.page.url = 'http://jakewrite.com/' + 'posts/build-your-club-website-with-metalsmith-part-3';
  this.page.identifier = 'build-your-clubwebsite-3';
};

(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><noscript>Please enable JavaScript to view the<a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a href="http://disqus.com" class="dsq-brlink">comments powered by<span class="logo-disqus">Disqus</span></a></div><div id="footer"><p>Copyright &copy; 2016 JakeWrite</p></div><script id="dsq-count-scr" src="//jakewrite.disqus.com/count.js" async></script></div></div></div></body></head></html><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46793855-5', 'auto');
  ga('send', 'pageview');
</script>
